<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Automatic Gating · ESM</title><meta name="title" content="Automatic Gating · ESM"/><meta property="og:title" content="Automatic Gating · ESM"/><meta property="twitter:title" content="Automatic Gating · ESM"/><meta name="description" content="Documentation for ESM."/><meta property="og:description" content="Documentation for ESM."/><meta property="twitter:description" content="Documentation for ESM."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">ESM</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><a class="tocitem" href="../../tutorial/">Getting Started with ESM</a></li><li><span class="tocitem">Plate Readers</span><ul><li><a class="tocitem" href="../../plate_readers/">Introduction</a></li><li><a class="tocitem" href="../../plate_readers/growth_rate/">Growth Rate</a></li><li><a class="tocitem" href="../../plate_readers/fluorescence/">Fluorescence</a></li><li><a class="tocitem" href="../../plate_readers/calibration/">Calibration</a></li><li><a class="tocitem" href="../../plate_readers/compatibility/">Compatibility</a></li></ul></li><li><span class="tocitem">Flow Cytometry</span><ul><li><a class="tocitem" href="../">Introduction</a></li><li class="is-active"><a class="tocitem" href>Automatic Gating</a><ul class="internal"><li><a class="tocitem" href="#KDE"><span>KDE</span></a></li><li><a class="tocitem" href="#Implementation-Details"><span>Implementation Details</span></a></li></ul></li><li><a class="tocitem" href="../manual_gating/">Manual Gating</a></li></ul></li><li><span class="tocitem">qPCR</span><ul><li><a class="tocitem" href="../../qpcr/">Introduction</a></li></ul></li><li><a class="tocitem" href="../../data_format/">Data Format</a></li><li><a class="tocitem" href="../../cli/">Command Line Interface</a></li><li><a class="tocitem" href="../../excel/">Excel Interface</a></li><li><a class="tocitem" href="../../api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Flow Cytometry</a></li><li class="is-active"><a href>Automatic Gating</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Automatic Gating</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/eebio/esm" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/eebio/esm/blob/main/docs/src/flow_cytometers/auto_gating.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Automatic-Gating"><a class="docs-heading-anchor" href="#Automatic-Gating">Automatic Gating</a><a id="Automatic-Gating-1"></a><a class="docs-heading-anchor-permalink" href="#Automatic-Gating" title="Permalink"></a></h1><p>There are a couple of methods for automatically gating flow cytometry data. Each method uses the <code>gate(data, Method())</code> function signature which will return all the data that passes the automatic gating algorithm. These can be used either in the Julia ESM package diectly, or in the transformations in the Excel template.</p><div class="admonition is-success" id="Flow-cytometry-samples-and-groups-67e02c28bd439945"><header class="admonition-header">Flow cytometry samples and groups<a class="admonition-anchor" href="#Flow-cytometry-samples-and-groups-67e02c28bd439945" title="Permalink"></a></header><div class="admonition-body"><p>When using ESM transformations, samples and groups are automatically converted to relative fluoresence intensity. This allows you to use <code>gate</code> on any flow sample or group of flow samples.</p></div></div><article><details class="docstring" open="true"><summary id="ESM.gate-flow_cytometers-auto_gating"><a class="docstring-binding" href="#ESM.gate-flow_cytometers-auto_gating"><code>ESM.gate</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">gate(data, method::AbstractGatingMethod)</code></pre><p>Filter <code>data</code> to only include events within the gate defined by <code>method</code>.</p><p>Arguments:</p><ul><li><code>data::Dict</code>: Dict returned by <a href="../../api/#ESM.to_rfi-Tuple{Any, Any}">to_rfi</a>.</li><li><code>method::AbstractGatingMethod</code>: The method and settings to use for gating.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/eebio/esm/blob/4e07a6914b206ae008ba3ed616fd7325439b36dc/src/flow.jl#L134-L142">source</a></section></details></article><h2 id="KDE"><a class="docs-heading-anchor" href="#KDE">KDE</a><a id="KDE-1"></a><a class="docs-heading-anchor-permalink" href="#KDE" title="Permalink"></a></h2><p>The <code>KDE</code> method (Kernal Density Estimation) is an automatic gating method based on <a href="https://github.com/taborlab/FlowCal">FlowCal</a>. It generates an 2D histogram in the provided channels. It then smoothes out the densities of this histogram using <code>KernalDensity.jl</code> to remove isolated bins of high density (noise). It then returns some fraction of the data (<code>gate_frac</code> which defaults to 0.65) which is highest in density.</p><div class="admonition is-todo" id="Animation-567364361218205d"><header class="admonition-header">Animation<a class="admonition-anchor" href="#Animation-567364361218205d" title="Permalink"></a></header><div class="admonition-body"><p>This is an awkward method to explain, best to create an animation for it.</p></div></div><p>It can be called using <code>gate(data, KDE(channels=[&quot;FSC_A&quot;, &quot;SSC_A&quot;], gate_frac=0.65, nbins=1024))</code> where <code>gate_frac</code> and <code>nbins</code> are optional.</p><h2 id="Implementation-Details"><a class="docs-heading-anchor" href="#Implementation-Details">Implementation Details</a><a id="Implementation-Details-1"></a><a class="docs-heading-anchor-permalink" href="#Implementation-Details" title="Permalink"></a></h2><p>If you want to implement a new automatic gating method to be included in ESM, you need to:</p><ul><li>Open a pull request with the following code changes</li><li>Define a new struct for your method type in <code>src/methods.jl</code></li><li>The type of that struct is a subtype of <code>AbstractAutoGate</code></li><li>Define a new method dispatch <code>gate(data, ::NameOfNewMethodType)</code></li><li>Document that method in the automatic gating documentation (this page)</li></ul><p>If you are unsure how to do any of these steps, feel free to <a href="https://github.com/eebio/esm/issues/new/choose">open an issue on GitHub</a> asking for a new automatic gating method and explaining how the gate should work.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Introduction</a><a class="docs-footer-nextpage" href="../manual_gating/">Manual Gating »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Tuesday 9 December 2025 13:34">Tuesday 9 December 2025</span>. Using Julia version 1.12.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
