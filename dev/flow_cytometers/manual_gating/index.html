<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Manual Gating · ESM</title><meta name="title" content="Manual Gating · ESM"/><meta property="og:title" content="Manual Gating · ESM"/><meta property="twitter:title" content="Manual Gating · ESM"/><meta name="description" content="Documentation for ESM."/><meta property="og:description" content="Documentation for ESM."/><meta property="twitter:description" content="Documentation for ESM."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">ESM</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><a class="tocitem" href="../../tutorial/">Getting Started with ESM</a></li><li><span class="tocitem">Plate Readers</span><ul><li><a class="tocitem" href="../../plate_readers/">Introduction</a></li><li><a class="tocitem" href="../../plate_readers/growth_rate/">Growth Rate</a></li><li><a class="tocitem" href="../../plate_readers/fluorescence/">Fluorescence</a></li><li><a class="tocitem" href="../../plate_readers/calibration/">Calibration</a></li><li><a class="tocitem" href="../../plate_readers/compatibility/">Compatibility</a></li></ul></li><li><span class="tocitem">Flow Cytometry</span><ul><li><a class="tocitem" href="../">Introduction</a></li><li><a class="tocitem" href="../auto_gating/">Automatic Gating</a></li><li class="is-active"><a class="tocitem" href>Manual Gating</a><ul class="internal"><li><a class="tocitem" href="#HighLowGate"><span>HighLowGate</span></a></li><li><a class="tocitem" href="#RectangleGate"><span>RectangleGate</span></a></li><li><a class="tocitem" href="#QuadrantGate"><span>QuadrantGate</span></a></li><li><a class="tocitem" href="#PolygonGate"><span>PolygonGate</span></a></li><li><a class="tocitem" href="#EllipseGate"><span>EllipseGate</span></a></li><li><a class="tocitem" href="#Logical-Operations-on-Gates"><span>Logical Operations on Gates</span></a></li><li><a class="tocitem" href="#Implementation-Details"><span>Implementation Details</span></a></li></ul></li></ul></li><li><span class="tocitem">qPCR</span><ul><li><a class="tocitem" href="../../qpcr/">Introduction</a></li></ul></li><li><a class="tocitem" href="../../data_format/">Data Format</a></li><li><a class="tocitem" href="../../cli/">Command Line Interface</a></li><li><a class="tocitem" href="../../excel/">Excel Interface</a></li><li><a class="tocitem" href="../../api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Flow Cytometry</a></li><li class="is-active"><a href>Manual Gating</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Manual Gating</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/eebio/esm" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/eebio/esm/blob/main/docs/src/flow_cytometers/manual_gating.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Manual-Gating"><a class="docs-heading-anchor" href="#Manual-Gating">Manual Gating</a><a id="Manual-Gating-1"></a><a class="docs-heading-anchor-permalink" href="#Manual-Gating" title="Permalink"></a></h1><p>There are a variety of types of gates that can be applied to flow cytometry data. Each method uses the <code>gate(data, Method())</code> function signature which will return the subset of events in <code>data</code> that satisfy that gate. These can be used either in the Julia ESM package diectly, or in the transformations in the Excel template.</p><div class="admonition is-success" id="Flow-cytometry-samples-and-groups-67e02c28bd439945"><header class="admonition-header">Flow cytometry samples and groups<a class="admonition-anchor" href="#Flow-cytometry-samples-and-groups-67e02c28bd439945" title="Permalink"></a></header><div class="admonition-body"><p>When using ESM transformations, samples and groups are automatically converted to relative fluoresence intensity. This allows you to use <code>gate</code> on any flow sample or group of flow samples.</p></div></div><article><details class="docstring" open="true"><summary id="ESM.gate-flow_cytometers-manual_gating"><a class="docstring-binding" href="#ESM.gate-flow_cytometers-manual_gating"><code>ESM.gate</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">gate(data, method::AbstractGatingMethod)</code></pre><p>Filter <code>data</code> to only include events within the gate defined by <code>method</code>.</p><p>Arguments:</p><ul><li><code>data::Dict</code>: Dict returned by <a href="../../api/#ESM.to_rfi-Tuple{Any, Any}">to_rfi</a>.</li><li><code>method::AbstractGatingMethod</code>: The method and settings to use for gating.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/eebio/esm/blob/b506070c1f527e69d60854844e35a8811e51bdae/src/flow.jl#L136-L144">source</a></section></details></article><h2 id="HighLowGate"><a class="docs-heading-anchor" href="#HighLowGate">HighLowGate</a><a id="HighLowGate-1"></a><a class="docs-heading-anchor-permalink" href="#HighLowGate" title="Permalink"></a></h2><p>The <code>HighLowGate</code> removes any events that are below <code>lb</code> in <code>channel</code> or above <code>ub</code> in channel. If one of the bounds is not specified, it will not be used to remove any data.</p><p>It can be called using <code>gate(data, HighLowGate(channel, lb, ub))</code>.</p><div class="admonition is-info" id="Upper-and-Lower-Bounds-ebb1c63ee716f20e"><header class="admonition-header">Upper and Lower Bounds<a class="admonition-anchor" href="#Upper-and-Lower-Bounds-ebb1c63ee716f20e" title="Permalink"></a></header><div class="admonition-body"><p>Lower bounds are always inclusive (<code>lb</code>≤<code>data[channel]</code>) while upper bounds are always exclusive (<code>data[channel]</code>&lt;<code>ub</code>).</p></div></div><h2 id="RectangleGate"><a class="docs-heading-anchor" href="#RectangleGate">RectangleGate</a><a id="RectangleGate-1"></a><a class="docs-heading-anchor-permalink" href="#RectangleGate" title="Permalink"></a></h2><p>The <code>RectangleGate</code> is equivalent to applying two <code>HighLowGate</code>s. It returns all data where:</p><p class="math-container">\[lb1 ≤ data[channel1] &lt; ub1 \\
\text{and} \\
lb2 ≤ data[channel2] &lt; ub2 \\\]</p><p>As with the <code>HighLowGate</code>, any of the upper and lower bounds can be left out to avoid gating on that bound.</p><p>It can be called using <code>gate(data, RectangleGate(channel1, channel2, lb1, ub1, lb2, ub2))</code>.</p><h2 id="QuadrantGate"><a class="docs-heading-anchor" href="#QuadrantGate">QuadrantGate</a><a id="QuadrantGate-1"></a><a class="docs-heading-anchor-permalink" href="#QuadrantGate" title="Permalink"></a></h2><p>The <code>QuadrantGate</code> is defined by a single point, a pair of values and channels. The values split all events into 4 quadrants, (high channel 1 and high channel 2, high channel 1 and low channel 2, low channel 1 and low channel 2, low channel 1 and high channel 2). You then need to specify a quadrant you want to return, numbered 1 through 4 in that order.</p><div class="admonition is-success" id="Remembering-the-quadrant-order-744a226c57959abc"><header class="admonition-header">Remembering the quadrant order<a class="admonition-anchor" href="#Remembering-the-quadrant-order-744a226c57959abc" title="Permalink"></a></header><div class="admonition-body"><p>If you were to plot the data with <code>channel1</code> on the x-axis and <code>channel2</code> on the y-axis, then quadrant 1 is in the top right corner, and the remaining quadrants are given by travelling clockwise.</p></div></div><p>It can be called using <code>gate(data, QuadrantGate(channel1, channel2, channel1value, channel2value, quadrant))</code>.</p><h2 id="PolygonGate"><a class="docs-heading-anchor" href="#PolygonGate">PolygonGate</a><a id="PolygonGate-1"></a><a class="docs-heading-anchor-permalink" href="#PolygonGate" title="Permalink"></a></h2><p>The <code>PolygonGate</code> can be used to create arbitrary polygons, gating to remove any data that doesn&#39;t fit inside the polygon. A <code>PolygonGate</code> can be created from a series of x-y coordinates describing the vertices of the polygon.</p><p>It can be called using <code>gate(data, PolygonGate(channel1, channel2, points))</code>.</p><h2 id="EllipseGate"><a class="docs-heading-anchor" href="#EllipseGate">EllipseGate</a><a id="EllipseGate-1"></a><a class="docs-heading-anchor-permalink" href="#EllipseGate" title="Permalink"></a></h2><p>The <code>EllipseGate</code> can be used to remove data that falls outside of a predefined ellipse. An <code>EllipseGate</code> can be created from 5 points that fall on the ellipse, or 3-5 points that fall on the ellipse and the ellipse&#39;s center.</p><p>It can be called using <code>gate(data, EllipseGate(channel1, channel2, points))</code> or <code>gate(data, EllipseGate(channel1, channel2, center, points))</code>.</p><h2 id="Logical-Operations-on-Gates"><a class="docs-heading-anchor" href="#Logical-Operations-on-Gates">Logical Operations on Gates</a><a id="Logical-Operations-on-Gates-1"></a><a class="docs-heading-anchor-permalink" href="#Logical-Operations-on-Gates" title="Permalink"></a></h2><p>You can also perform logical operations on gates. The logical operations are <code>and</code>, <code>or</code>, and <code>not</code>. They can be used either through operators (<code>HighLowGate(channel=&quot;FL1_A&quot;, lb=500.0, ub=2000.0) &amp; QuadrantGate(channel1=&quot;SSC_A&quot;, ...)</code>) or through the <code>and</code> function (<code>and(HighLowGate(channel=&quot;FL1_A&quot;, lb=500.0, ub=2000.0), QuadrantGate(channel1=&quot;SSC_A&quot;, ...))</code>). This will return an <code>AndGate</code> (<code>|</code> and <code>or</code> returns an <code>OrGate</code>, and <code>!</code> and <code>not</code> return a <code>NotGate</code>) which can then be gated on (<code>gate(data, HighLowGate(...) &amp; QuadrantGate(...))</code>).</p><h2 id="Implementation-Details"><a class="docs-heading-anchor" href="#Implementation-Details">Implementation Details</a><a id="Implementation-Details-1"></a><a class="docs-heading-anchor-permalink" href="#Implementation-Details" title="Permalink"></a></h2><p>If you want to implement a new manual gate to be included in ESM, you need to:</p><ul><li>Open a pull request with the following code changes</li><li>Define a new struct for your method type in <code>src/methods.jl</code></li><li>The type of that struct is a subtype of <code>AbstractManualGate</code></li><li>Define a new method dispatch <code>gate(data, ::NameOfNewMethodType)</code></li><li>Document that method in the manual gating documentation (this page)</li></ul><div class="admonition is-info" id="Note-ffc4139f29d35a5e"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-ffc4139f29d35a5e" title="Permalink"></a></header><div class="admonition-body"><p>Gates can only return a single group that &quot;passes&quot; the gate. For example, it is not possible to have a single <code>QuadrantGate</code> that separates the data into all four quadrants. This is so that it plays nicely with the ESM transformations. If you need to gate into all four quadrants, you should define four <code>QuadrantGate</code>s, each with different values of the <code>quadrant</code> parameter.</p></div></div><p>If you are unsure how to do any of these steps, feel free to <a href="https://github.com/eebio/esm/issues/new/choose">open an issue on GitHub</a> asking for a new manual gate and explaining how the gate should work.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../auto_gating/">« Automatic Gating</a><a class="docs-footer-nextpage" href="../../qpcr/">Introduction »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Wednesday 7 January 2026 15:18">Wednesday 7 January 2026</span>. Using Julia version 1.12.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
